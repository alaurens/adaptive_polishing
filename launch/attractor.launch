<?xml version="1.0" ?>
<launch>

    <arg name="topic_real_velocity" default="/lwr/ee_vel"/>

  <arg name="topic_task1_velocity" default="/Task1/desired_velocity"/>
  <arg name="topic_task2_velocity" default="/Task2/desired_velocity"/>
  <arg name="topic_task3_velocity" default="/Task3/desired_velocity"/>

  <arg name="topic_adapted_velocity" default="/lwr/joint_controllers/passive_ds_command_vel"/>
  <arg name="topic_desired_force" default="/task_adaptation/desired_force"/>


  <group ns="att1">
    <param name="input_rob_pose_topic_name" value="/lwr/ee_pose"/>
    <param name="input_rob_vel_topic_name" value="/lwr/ee_vel"/>
    <param name="input_rob_acc_topic_name" value="/lwr/ee_accel"/>
    <param name="input_rob_force_topic_name" value="/lwr/ee_ft"/>
    <param name="output_vel_topic_name" value="$(arg topic_task1_velocity)"/>
    <param name="output_filtered_vel_topic_name" value="/filtered_output"/>
    <rosparam command="load" file="$(find adaptive_polishing)/config/attractor1_init_param.yml"/>   
    <node name="main_node" pkg="adaptive_polishing" type="attractor_node" output="screen"/>
  </group>

  <group ns="att3">
    <param name="input_rob_pose_topic_name" value="/lwr/ee_pose"/>
    <param name="input_rob_vel_topic_name" value="/lwr/ee_vel"/>
    <param name="input_rob_acc_topic_name" value="/lwr/ee_accel"/>
    <param name="input_rob_force_topic_name" value="/lwr/ee_ft"/>
    <param name="output_vel_topic_name" value="$(arg topic_task2_velocity)"/>
    <param name="output_filtered_vel_topic_name" value="/filtered_output"/>
    <rosparam command="load" file="$(find adaptive_polishing)/config/attractor2_init_param.yml"/>   
    <node name="main_node" pkg="adaptive_polishing" type="attractor_node" output="screen"/>
  </group>

  <group ns="att3">
    <param name="input_rob_pose_topic_name" value="/lwr/ee_pose"/>
    <param name="input_rob_vel_topic_name" value="/lwr/ee_vel"/>
    <param name="input_rob_acc_topic_name" value="/lwr/ee_accel"/>
    <param name="input_rob_force_topic_name" value="/lwr/ee_ft"/>
    <param name="output_vel_topic_name" value="$(arg topic_task3_velocity)"/>
    <param name="output_filtered_vel_topic_name" value="/filtered_output"/>
    <rosparam command="load" file="$(find adaptive_polishing)/config/attractor3_init_param.yml"/>   
    <node name="main_node" pkg="adaptive_polishing" type="attractor_node" output="screen"/>
  </group>

  <group ns="planner">
    <param name="topic_real_velocity"    value="$(arg topic_real_velocity)"/>
    <param name="topic_att1_velocity"   value="$(arg topic_task1_velocity)"/>
    <param name="topic_att2_velocity"   value="$(arg topic_task2_velocity)"/>
    <param name="topic_att3_velocity"   value="$(arg topic_task3_velocity)"/>
    <node name="TA_node" pkg="adaptive_polishing" type="planner_node" output="screen"/>
  </group>

<!-- <node name="rqt_reconfigure" pkg="rqt_reconfigure" type="rqt_reconfigure" /> -->

</launch>